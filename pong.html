<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<title>Canvas</title>
	
	<style type="text/css" media="screen">
	* { margin: 0; padding: 0; outline: 0; }
	html, body { background: black; text-align: center; color: #4da612; }
	h1 { height: 133px; font-size:0; line-height: 0; text-indent: -4000px; }
	a { color: white; text-decoration: none }
	canvas { cursor: crosshair; margin-top: 30px; }
	p { height: 22px; margin-top: 30px; font-size:0; line-height: 0; text-indent: -4000px; }
	</style>
	
	<script src="ncanvas.js" type="text/javascript" language="javascript" charset="utf-8" ></script>
	<script src="ncanvas-text.js" type="text/javascript" language="javascript" charset="utf-8" ></script>
	<script type="text/javascript" language="javascript" charset="utf-8">
	
	function init() {
		var n = document.getElementById("area").getNCanvas();
		//n.autoClear = false;
		var score = 0;
		var hits = 0;
		
		var mainScene = new NScene({name: 'main', fps: 40});
		
		var r = new NRect({x: n.width/2 - 50, y: n.height/2 - 50, width: 100, height: 100, fillColor: '#4da612'});
		r.x = 200
		r.center.x = n.width/2;
		r.center.y = n.height/2;
		//r.addTo(mainScene);
		
		var keys = {up: false, down: false, left: false, right: false};
		window.onkeydown = function(e) {
			switch(e.keyCode){
				case 38: keys.up = true; break;
				case 40: keys.down = true; break;
				case 37: keys.left = true; break;
				case 39: keys.right = true; break;
			}
		}
		window.onkeyup = function(e) {
			switch(e.keyCode){
				case 38: keys.up = false; break;
				case 40: keys.down = false; break;
				case 37: keys.left = false; break;
				case 39: keys.right = false; break;
			}
		}
		
		var stroke = '#4da612';
//		stroke = '#ffffff';
		var points = {
			t11 : new NPoint({x: n.width/2 - 50, y: n.height/2 - 50, z: -50, lineColor: stroke, color: stroke}),
			t12 : new NPoint({x: n.width/2 + 50, y: n.height/2 - 50, z: -50, lineColor: stroke, color: stroke}),
			t13 : new NPoint({x: n.width/2 + 50, y: n.height/2 + 50, z: -50, lineColor: stroke, color: stroke}),
			t14 : new NPoint({x: n.width/2 - 50, y: n.height/2 + 50, z: -50, lineColor: stroke, color: stroke}),
			t21 : new NPoint({x: n.width/2 - 50, y: n.height/2 - 50, z: 50, lineColor: stroke, color: stroke}),
			t22 : new NPoint({x: n.width/2 + 50, y: n.height/2 - 50, z: 50, lineColor: stroke, color: stroke}),
			t23 : new NPoint({x: n.width/2 + 50, y: n.height/2 + 50, z: 50, lineColor: stroke, color: stroke}),
			t24 : new NPoint({x: n.width/2 - 50, y: n.height/2 + 50, z: 50, lineColor: stroke, color: stroke}),
			t31 : new NPoint({x: n.width/2, y: n.height/2, z: - 75, lineColor: stroke, color: stroke}),
			t32 : new NPoint({x: n.width/2, y: n.height/2, z: + 75, lineColor: stroke, color: stroke}),
			t33 : new NPoint({x: n.width/2 + 75, y: n.height/2, z: 0, lineColor: stroke, color: stroke}),
			t34 : new NPoint({x: n.width/2 - 75, y: n.height/2, z: 0, lineColor: stroke, color: stroke}),
			t35 : new NPoint({x: n.width/2, y: n.height/2 + 75, z: 0, lineColor: stroke, color: stroke}),
			t36 : new NPoint({x: n.width/2, y: n.height/2 -75, z: 0, lineColor: stroke, color: stroke})
		}
		
		
		var rc = new NPoint({x: n.width/2, y: n.height/2, z: 300});
		var rotc = new NPoint({x: n.width/2, y: n.height/2, z: 0});
		
		var theta = Math.PI/180;
		var i = 0;
		
		
		for (index in points) {
			//points[index].rotateZ(Math.PI/10, rotc);
			points[index].draw(n.node, rc);
		}
		
		mainScene.addListener('onEnterFrame', function(e) {
			i++;
			
			rc.z += keys.up * 10;
			rc.z -= keys.down * 10;
				
			for (index in points) {
				points[index].rotateY(theta, rotc);
				points[index].rotateX(theta, rotc);
				points[index].rotateZ(theta, rotc);
				points[index].draw(n.node, rc);
			}
			points.t31.lineTo(n.node, points.t32, rc);
			points.t33.lineTo(n.node, points.t34, rc);
			points.t35.lineTo(n.node, points.t36, rc);
			/*
			points.t11.lineTo(n.node, points.t21, rc);
			points.t11.lineTo(n.node, points.t12, rc);
			points.t11.lineTo(n.node, points.t14, rc);
			
			points.t13.lineTo(n.node, points.t23, rc);
			points.t13.lineTo(n.node, points.t12, rc);
			points.t13.lineTo(n.node, points.t14, rc);
			
			points.t22.lineTo(n.node, points.t23, rc);
			points.t22.lineTo(n.node, points.t21, rc);
			points.t22.lineTo(n.node, points.t12, rc);
			
			points.t24.lineTo(n.node, points.t21, rc);
			points.t24.lineTo(n.node, points.t23, rc);
			points.t24.lineTo(n.node, points.t14, rc);
			*/
			/*
			n.node.beginPath();
			n.node.fillStyle = '#4da612';
			n.node.arc(rc.x, rc.y, 2, 0, Math.PI*2, true);
			n.node.closePath();
			n.node.fill();
			*/
			// r.z -= 1 - 3*keys.up;
			if( i >= 400) {
				//n.stop();
			}
		});
		
		n.play(mainScene, mainScene.fps);
	}
	</script>
</head>
<body onload="init();"><h1>PONG</h1><canvas id="area" width="400" height="300">You are so not 2010!</canvas><p>By Siyan Panayotov</p></body>
</html>
